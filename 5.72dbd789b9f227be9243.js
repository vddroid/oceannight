(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{l0No:function(e,t,i){"use strict";i.r(t),i.d(t,"AccountsModule",(function(){return Re}));var r=i("3Pt+"),n=i("ofXK"),b=i("tyNb"),s=i("SxV6"),o=i("fXoL"),c=i("J9tS");function a(e,t){1&e&&o.Jb(0,"span",11)}function d(e,t){1&e&&(o.Lb(0,"span"),o.ic(1,"Delete"),o.Kb())}function l(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.ic(2),o.Kb(),o.Lb(3,"td"),o.ic(4),o.Kb(),o.Lb(5,"td"),o.ic(6),o.Kb(),o.Lb(7,"td",7),o.Lb(8,"a",8),o.ic(9,"Edit"),o.Kb(),o.Lb(10,"button",9),o.Sb("click",(function(){o.dc(e);const i=t.$implicit;return o.Wb().deleteAccount(i.id)})),o.hc(11,a,1,0,"span",10),o.hc(12,d,2,0,"span",6),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.mc(" ",e.title," ",e.firstName," ",e.lastName," "),o.xb(2),o.jc(e.email),o.xb(2),o.jc(e.role),o.xb(2),o.Yb("routerLink","edit/",e.id,""),o.xb(2),o.Xb("disabled",e.isDeleting),o.xb(1),o.Xb("ngIf",e.isDeleting),o.xb(1),o.Xb("ngIf",!e.isDeleting)}}function u(e,t){1&e&&(o.Lb(0,"tr"),o.Lb(1,"td",12),o.Jb(2,"span",13),o.Kb(),o.Kb())}let m=(()=>{class e{constructor(e,t){this.accountService=e,this.alertService=t}ngOnInit(){this.accountService.getAll().pipe(Object(s.a)()).subscribe(e=>this.accounts=e,e=>{this.alertService.error(e)})}deleteAccount(e){confirm("Are you sure ?")&&(this.accounts.find(t=>t.id===e).isDeleting=!0,this.accountService.delete(e).pipe(Object(s.a)()).subscribe(()=>{this.accounts=this.accounts.filter(t=>t.id!==e)},e=>{this.alertService.error(e)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["ng-component"]],decls:22,vars:2,consts:[[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"h1"),o.ic(2,"Accounts"),o.Kb(),o.Lb(3,"p"),o.ic(4,"All accounts from secure (admin only) api end point:"),o.Kb(),o.Lb(5,"a",1),o.ic(6,"Create Account"),o.Kb(),o.Jb(7,"br"),o.Jb(8,"br"),o.Lb(9,"table",2),o.Lb(10,"thead"),o.Lb(11,"tr"),o.Lb(12,"th",3),o.ic(13,"Name"),o.Kb(),o.Lb(14,"th",3),o.ic(15,"Email"),o.Kb(),o.Lb(16,"th",3),o.ic(17,"Role"),o.Kb(),o.Jb(18,"th",4),o.Kb(),o.Kb(),o.Lb(19,"tbody"),o.hc(20,l,13,9,"tr",5),o.hc(21,u,3,0,"tr",6),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(20),o.Xb("ngForOf",t.accounts),o.xb(1),o.Xb("ngIf",!t.accounts))},directives:[b.f,n.i,n.j],encapsulation:2}),e})();var f=i("XgRA");function h(e,t){1&e&&(o.Lb(0,"h1"),o.ic(1,"Create Account"),o.Kb())}function p(e,t){1&e&&(o.Lb(0,"h1"),o.ic(1,"Edit Account"),o.Kb())}function g(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Title is required"),o.Kb())}function v(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,g,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.title.errors.required)}}function L(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"First Name is required"),o.Kb())}function K(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,L,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.firstName.errors.required)}}function x(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Last Name is required"),o.Kb())}function I(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,x,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.lastName.errors.required)}}function S(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Email is required"),o.Kb())}function w(e,t){1&e&&(o.Lb(0,"div"),o.ic(1," Email must be a valid email address "),o.Kb())}function C(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,S,2,0,"div",0),o.hc(2,w,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.email.errors.required),o.xb(1),o.Xb("ngIf",e.f.email.errors.email)}}function X(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Role is required"),o.Kb())}function y(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,X,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.role.errors.required)}}function P(e,t){1&e&&(o.Lb(0,"div"),o.Lb(1,"h3",27),o.ic(2,"Change Password"),o.Kb(),o.Lb(3,"p"),o.ic(4,"Leave blank to keep the same password"),o.Kb(),o.Kb())}function N(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Password is required"),o.Kb())}function q(e,t){1&e&&(o.Lb(0,"div"),o.ic(1," Password must be at least 6 characters "),o.Kb())}function k(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,N,2,0,"div",0),o.hc(2,q,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.password.errors.required),o.xb(1),o.Xb("ngIf",e.f.password.errors.minlength)}}function J(e,t){1&e&&(o.Lb(0,"div"),o.ic(1," Confirm Password is required "),o.Kb())}function O(e,t){1&e&&(o.Lb(0,"div"),o.ic(1," Passwords must match "),o.Kb())}function M(e,t){if(1&e&&(o.Lb(0,"div",26),o.hc(1,J,2,0,"div",0),o.hc(2,O,2,0,"div",0),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.confirmPassword.errors.required),o.xb(1),o.Xb("ngIf",e.f.confirmPassword.errors.mustMatch)}}function j(e,t){1&e&&o.Jb(0,"span",28)}const A=function(e){return{"is-invalid":e}};let F=(()=>{class e{constructor(e,t,i,r,n){this.formBuilder=e,this.route=t,this.router=i,this.accountService=r,this.alertService=n,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",r.m.required],firstName:["",r.m.required],lastName:["",r.m.required],email:["",[r.m.required,r.m.email]],role:["",r.m.required],password:["",[r.m.minLength(6),this.isAddMode?r.m.required:r.m.nullValidator]],confirmPassword:[""]},{validator:Object(f.d)("password","confirmPassword")}),this.isAddMode||this.accountService.getById(this.id).pipe(Object(s.a)()).subscribe(e=>this.form.patchValue(e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount())}createAccount(){this.accountService.create(this.form.value).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Account created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}updateAccount(){this.accountService.update(this.id,this.form.value).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(r.c),o.Ib(b.a),o.Ib(b.c),o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["ng-component"]],decls:64,vars:34,consts:[[4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"ngClass"],["value","User"],["value","Admin"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(o.hc(0,h,2,0,"h1",0),o.hc(1,p,2,0,"h1",0),o.Jb(2,"br"),o.Lb(3,"div",1),o.Lb(4,"form",2),o.Sb("ngSubmit",(function(){return t.onSubmit()})),o.Lb(5,"div",3),o.Lb(6,"div",4),o.Lb(7,"label"),o.ic(8,"Title"),o.Kb(),o.Lb(9,"select",5),o.Jb(10,"option",6),o.Lb(11,"option",7),o.ic(12,"Mr"),o.Kb(),o.Lb(13,"option",8),o.ic(14,"Mrs"),o.Kb(),o.Lb(15,"option",9),o.ic(16,"Miss"),o.Kb(),o.Lb(17,"option",10),o.ic(18,"Ms"),o.Kb(),o.Kb(),o.hc(19,v,2,1,"div",11),o.Kb(),o.Lb(20,"div",12),o.Lb(21,"label"),o.ic(22,"First Name"),o.Kb(),o.Jb(23,"input",13),o.hc(24,K,2,1,"div",11),o.Kb(),o.Lb(25,"div",12),o.Lb(26,"label"),o.ic(27,"Last Name"),o.Kb(),o.Jb(28,"input",14),o.hc(29,I,2,1,"div",11),o.Kb(),o.Kb(),o.Lb(30,"div",3),o.Lb(31,"div",15),o.Lb(32,"label"),o.ic(33,"Email"),o.Kb(),o.Jb(34,"input",16),o.hc(35,C,3,2,"div",11),o.Kb(),o.Lb(36,"div",4),o.Lb(37,"label"),o.ic(38,"Role"),o.Kb(),o.Lb(39,"select",17),o.Jb(40,"option",6),o.Lb(41,"option",18),o.ic(42,"User"),o.Kb(),o.Lb(43,"option",19),o.ic(44,"Admin"),o.Kb(),o.Kb(),o.hc(45,y,2,1,"div",11),o.Kb(),o.Kb(),o.hc(46,P,5,0,"div",0),o.Lb(47,"div",3),o.Lb(48,"div",4),o.Lb(49,"label"),o.ic(50,"Password"),o.Kb(),o.Jb(51,"input",20),o.hc(52,k,3,2,"div",11),o.Kb(),o.Lb(53,"div",4),o.Lb(54,"label"),o.ic(55,"Confirm Password"),o.Kb(),o.Jb(56,"input",21),o.hc(57,M,3,2,"div",11),o.Kb(),o.Kb(),o.Lb(58,"div",22),o.Lb(59,"button",23),o.hc(60,j,1,0,"span",24),o.ic(61," Save "),o.Kb(),o.Lb(62,"a",25),o.ic(63,"Cancel"),o.Kb(),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.Xb("ngIf",t.isAddMode),o.xb(1),o.Xb("ngIf",!t.isAddMode),o.xb(3),o.Xb("formGroup",t.form),o.xb(5),o.Xb("ngClass",o.ac(20,A,t.submitted&&t.f.title.errors)),o.xb(10),o.Xb("ngIf",t.submitted&&t.f.title.errors),o.xb(4),o.Xb("ngClass",o.ac(22,A,t.submitted&&t.f.firstName.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.firstName.errors),o.xb(4),o.Xb("ngClass",o.ac(24,A,t.submitted&&t.f.lastName.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.lastName.errors),o.xb(5),o.Xb("ngClass",o.ac(26,A,t.submitted&&t.f.email.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.email.errors),o.xb(4),o.Xb("ngClass",o.ac(28,A,t.submitted&&t.f.role.errors)),o.xb(6),o.Xb("ngIf",t.submitted&&t.f.role.errors),o.xb(1),o.Xb("ngIf",!t.isAddMode),o.xb(5),o.Xb("ngClass",o.ac(30,A,t.submitted&&t.f.password.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.password.errors),o.xb(4),o.Xb("ngClass",o.ac(32,A,t.submitted&&t.f.confirmPassword.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.confirmPassword.errors),o.xb(2),o.Xb("disabled",t.loading),o.xb(1),o.Xb("ngIf",t.loading))},directives:[n.j,r.o,r.g,r.e,r.l,r.f,r.d,n.h,r.h,r.n,r.b,b.f],encapsulation:2}),e})();function D(e,t){1&e&&o.Jb(0,"span",10)}function T(e,t){1&e&&(o.Lb(0,"span"),o.ic(1,"Delete"),o.Kb())}function W(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.ic(2),o.Kb(),o.Lb(3,"td"),o.ic(4),o.Kb(),o.Lb(5,"td",7),o.Lb(6,"button",8),o.Sb("click",(function(){o.dc(e);const i=t.$implicit;return o.Wb().deleteSubscriber(i.id)})),o.hc(7,D,1,0,"span",9),o.hc(8,T,2,0,"span",6),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.jc(e.id),o.xb(2),o.jc(e.email),o.xb(2),o.Xb("disabled",e.isDeleting),o.xb(1),o.Xb("ngIf",e.isDeleting),o.xb(1),o.Xb("ngIf",!e.isDeleting)}}function _(e,t){1&e&&(o.Lb(0,"tr"),o.Lb(1,"td",11),o.Jb(2,"span",12),o.Kb(),o.Kb())}let E=(()=>{class e{constructor(e,t){this.accountService=e,this.alertService=t}ngOnInit(){this.accountService.getAllSubscribers().pipe(Object(s.a)()).subscribe(e=>this.subscribers=e,e=>{this.alertService.error(e)})}deleteSubscriber(e){confirm("Are you sure?")&&(this.subscribers.find(t=>t.id===e).isDeleting=!0,this.accountService.deleteSubscriber(e).pipe(Object(s.a)()).subscribe(()=>{this.subscribers=this.subscribers.filter(t=>t.id!==e)},e=>{this.alertService.error(e)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-subscribers"]],decls:15,vars:2,consts:[[1,"container"],[1,"table","table-striped"],[2,"width","20%"],[2,"width","70%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spiner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"h1"),o.ic(2,"Subscribers"),o.Kb(),o.Jb(3,"br"),o.Lb(4,"table",1),o.Lb(5,"thead"),o.Lb(6,"tr"),o.Lb(7,"th",2),o.ic(8,"Id"),o.Kb(),o.Lb(9,"th",3),o.ic(10,"Email"),o.Kb(),o.Jb(11,"th",4),o.Kb(),o.Kb(),o.Lb(12,"tbody"),o.hc(13,W,9,5,"tr",5),o.hc(14,_,3,0,"tr",6),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(13),o.Xb("ngForOf",t.subscribers),o.xb(1),o.Xb("ngIf",!t.subscribers))},directives:[n.i,n.j],styles:[""]}),e})();function B(e,t){1&e&&o.Jb(0,"span",12)}function G(e,t){1&e&&(o.Lb(0,"span"),o.ic(1,"Delete"),o.Kb())}function R(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.ic(2),o.Kb(),o.Lb(3,"td"),o.ic(4),o.Kb(),o.Lb(5,"td"),o.ic(6),o.Kb(),o.Lb(7,"td"),o.ic(8),o.Kb(),o.Lb(9,"td"),o.ic(10),o.Kb(),o.Lb(11,"td",8),o.Lb(12,"a",9),o.ic(13,"Edit"),o.Kb(),o.Lb(14,"button",10),o.Sb("click",(function(){o.dc(e);const i=t.$implicit;return o.Wb().deleteContact(i.id)})),o.hc(15,B,1,0,"span",11),o.hc(16,G,2,0,"span",7),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.jc(e.firstName),o.xb(2),o.jc(e.lastName),o.xb(2),o.jc(e.email),o.xb(2),o.jc(e.phone),o.xb(2),o.jc(e.message),o.xb(2),o.Yb("routerLink","edit/",e.id,""),o.xb(2),o.Xb("disabled",e.isDeleting),o.xb(1),o.Xb("ngIf",e.isDeleting),o.xb(1),o.Xb("ngIf",!e.isDeleting)}}function V(e,t){1&e&&(o.Lb(0,"tr"),o.Lb(1,"td",13),o.Jb(2,"span",14),o.Kb(),o.Kb())}let $=(()=>{class e{constructor(e,t){this.accountService=e,this.alertService=t,this.isDeleting=!1}ngOnInit(){this.accountService.getAllContacts().pipe(Object(s.a)()).subscribe(e=>this.contacts=e,e=>{this.alertService.error(e)})}deleteContact(e){confirm("Are you sure?")&&(this.contacts.find(t=>t.id===e).isDeleting=!0,this.accountService.deleteContact(e).pipe(Object(s.a)()).subscribe(()=>{this.contacts=this.contacts.filter(t=>t.id!==e)},e=>{this.alertService.error(e)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-contacts"]],decls:21,vars:2,consts:[[1,"container"],[1,"table","table-striped"],[2,"width","15%"],[2,"width","20%"],[2,"width","10%"],[2,"width","25%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","bt-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border -sm",4,"ngIf"],[1,"spinner-border","spinner-border","-sm"],["colspan","6",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"h1"),o.ic(2,"Contacts"),o.Kb(),o.Jb(3,"br"),o.Lb(4,"table",1),o.Lb(5,"thead"),o.Lb(6,"tr"),o.Lb(7,"th",2),o.ic(8,"First Name"),o.Kb(),o.Lb(9,"th",2),o.ic(10,"Last Name"),o.Kb(),o.Lb(11,"th",3),o.ic(12,"Email"),o.Kb(),o.Lb(13,"th",4),o.ic(14,"Phone"),o.Kb(),o.Lb(15,"th",5),o.ic(16,"Message"),o.Kb(),o.Jb(17,"th",2),o.Kb(),o.Kb(),o.Lb(18,"tbody"),o.hc(19,R,17,9,"tr",6),o.hc(20,V,3,0,"tr",7),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(19),o.Xb("ngForOf",t.contacts),o.xb(1),o.Xb("ngIf",!t.contacts))},directives:[n.i,n.j,b.f],styles:[""]}),e})();function U(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Name is required"),o.Kb())}function Y(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,U,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.name.errors.required)}}function z(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Name is required"),o.Kb())}function H(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,z,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.name.errors.required)}}function Q(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Email is required"),o.Kb())}function Z(e,t){1&e&&(o.Lb(0,"div"),o.ic(1," Email must be a valid email address "),o.Kb())}function ee(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,Q,2,0,"div",15),o.hc(2,Z,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.email.errors.required),o.xb(1),o.Xb("ngIf",e.f.email.errors.mail)}}function te(e,t){1&e&&o.Jb(0,"span",16)}const ie=function(e){return{"is-invalid":e}};let re=(()=>{class e{constructor(e,t,i,r,n){this.formBuilder=e,this.route=t,this.router=i,this.accountService=r,this.alertService=n,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,console.log(this.id),this.form=this.formBuilder.group({firstName:["",r.m.required],lastName:["",r.m.required],email:["",r.m.required],phone:["",r.m.required],message:["",r.m.required]}),this.id&&this.accountService.getContactById(this.id).pipe(Object(s.a)()).subscribe(e=>{this.form.patchValue(e)},e=>{this.alertService.error(e)})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.updateContact())}updateContact(){this.accountService.updateContact(this.id,this.form.value).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Contact updated successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(r.c),o.Ib(b.a),o.Ib(b.c),o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-contacts-add-edit"]],decls:35,vars:15,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-6"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","text","formControlName","phone",1,"form-control"],[1,"form-group","col-12"],["type","text","formControlName","message","cols","30","rows","5",1,"form-control"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts/contacts",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(o.Lb(0,"form",0),o.Sb("ngSubmit",(function(){return t.onSubmit()})),o.Lb(1,"h1"),o.ic(2,"Edit Contact"),o.Kb(),o.Jb(3,"br"),o.Lb(4,"div",1),o.Lb(5,"div",2),o.Lb(6,"label"),o.ic(7,"First Name"),o.Kb(),o.Jb(8,"input",3),o.hc(9,Y,2,1,"div",4),o.Kb(),o.Lb(10,"div",2),o.Lb(11,"label"),o.ic(12,"Last Name"),o.Kb(),o.Jb(13,"input",5),o.hc(14,H,2,1,"div",4),o.Kb(),o.Lb(15,"div",2),o.Lb(16,"label"),o.ic(17,"Email"),o.Kb(),o.Jb(18,"input",6),o.hc(19,ee,3,2,"div",4),o.Kb(),o.Lb(20,"div",2),o.Lb(21,"label"),o.ic(22,"Phone"),o.Kb(),o.Jb(23,"input",7),o.Kb(),o.Kb(),o.Lb(24,"div",1),o.Lb(25,"div",8),o.Lb(26,"label"),o.ic(27,"Message"),o.Kb(),o.Jb(28,"textarea",9),o.Kb(),o.Kb(),o.Lb(29,"div",10),o.Lb(30,"button",11),o.hc(31,te,1,0,"span",12),o.ic(32,"Save "),o.Kb(),o.Lb(33,"a",13),o.ic(34,"Cancel"),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.Xb("formGroup",t.form),o.xb(8),o.Xb("ngClass",o.ac(9,ie,t.submitted&&t.f.firstName.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.firstName.errors),o.xb(4),o.Xb("ngClass",o.ac(11,ie,t.submitted&&t.f.lastName.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.lastName.errors),o.xb(4),o.Xb("ngClass",o.ac(13,ie,t.submitted&&t.f.email.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.email.errors),o.xb(11),o.Xb("disabled",t.loading),o.xb(1),o.Xb("ngIf",t.loading))},directives:[r.o,r.g,r.e,r.b,r.f,r.d,n.h,n.j,b.f],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:3px}"]}),e})();function ne(e,t){1&e&&o.Jb(0,"span",12)}function be(e,t){1&e&&(o.Lb(0,"span"),o.ic(1,"Delete"),o.Kb())}function se(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.ic(2),o.Kb(),o.Lb(3,"td"),o.ic(4),o.Kb(),o.Lb(5,"td"),o.ic(6),o.Kb(),o.Lb(7,"td",8),o.Lb(8,"a",9),o.ic(9,"Edit"),o.Kb(),o.Lb(10,"button",10),o.Sb("click",(function(){o.dc(e);const i=t.$implicit;return o.Wb().deleteMoviePoster(i.id)})),o.hc(11,ne,1,0,"span",11),o.hc(12,be,2,0,"span",7),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.jc(e.title),o.xb(2),o.jc(e.genre),o.xb(2),o.jc(e.photoPath),o.xb(2),o.Yb("routerLink","edit/",e.id,""),o.xb(2),o.Xb("disabled",e.isDeleting),o.xb(1),o.Xb("ngIf",e.isDeleting),o.xb(1),o.Xb("ngIf",!e.isDeleting)}}function oe(e,t){1&e&&(o.Lb(0,"tr"),o.Lb(1,"td",13),o.Jb(2,"span",14),o.Kb(),o.Kb())}let ce=(()=>{class e{constructor(e,t){this.accountService=e,this.alertService=t,this.loading=!1}ngOnInit(){this.accountService.getPosters().pipe(Object(s.a)()).subscribe(e=>{this.posters=e},e=>{this.alertService.error(e)})}deleteMoviePoster(e){confirm("Are you sure?")&&this.accountService.deletePosterById(e).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Poster delete successful",{keepAfterRouteChange:!0}),this.posters=this.posters.filter(t=>t.id!==e)},error:e=>{this.alertService.error(e),this.loading=!1}})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-movie-posters"]],decls:20,vars:2,consts:[[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","40%"],[2,"width","25%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","bt-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border -sm",4,"ngIf"],[1,"spinner-border","spinner-border","-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"h1"),o.ic(2,"Movie Posters"),o.Kb(),o.Lb(3,"a",1),o.ic(4,"Add Poster"),o.Kb(),o.Jb(5,"br"),o.Jb(6,"br"),o.Lb(7,"table",2),o.Lb(8,"thead"),o.Lb(9,"tr"),o.Lb(10,"th",3),o.ic(11,"Title"),o.Kb(),o.Lb(12,"th",4),o.ic(13,"Genre"),o.Kb(),o.Lb(14,"th",4),o.ic(15,"Photo Path"),o.Kb(),o.Jb(16,"th",5),o.Kb(),o.Kb(),o.Lb(17,"tbody"),o.hc(18,se,13,7,"tr",6),o.hc(19,oe,3,0,"tr",7),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(18),o.Xb("ngForOf",t.posters),o.xb(1),o.Xb("ngIf",!t.posters))},directives:[b.f,n.i,n.j],styles:[""]}),e})();var ae=i("tk/3"),de=i("nYR2");function le(e,t){if(1&e&&o.Jb(0,"mat-progress-bar",8),2&e){const e=o.Wb();o.Xb("value",e.uploadProgress)}}function ue(e,t){if(1&e){const e=o.Mb();o.Lb(0,"mat-icon",9),o.Sb("click",(function(){return o.dc(e),o.Wb().cancelUpload()})),o.ic(1,"delete_forever"),o.Kb()}}let me=(()=>{class e{constructor(e,t){this.http=e,this.accountService=t,this.fileName=""}ngOnInit(){}onFileSelected(e){const t=e.target.files[0];if(t){this.fileName=t.name;const e=new FormData;e.append("photoPath",t);const i=this.http.post("/assets/images",e,{reportProgress:!0,observe:"events"}).pipe(Object(de.a)(()=>this.reset()));this.uploadSub=i.subscribe(e=>{e.type==ae.d.UploadProgress&&(this.uploadProgress=Math.round(e.loaded/e.total*100))})}this.photoPath=this.fileName}cancelUpload(){this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=null,this.uploadSub=null}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(ae.b),o.Ib(c.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-file-upload"]],inputs:{requiredFileType:"requiredFileType"},outputs:{photoPath:"photoPath"},decls:11,vars:4,consts:[["type","file",1,"file-input",3,"accept","change"],["fileUpload",""],[1,"file-upload"],["mat-mini-fab","","color","primary","title","Attach File","type","button",1,"upload-btn",3,"click"],["requiredFileType","image/png",1,"material-icons","md-24"],[1,"progress"],["class","progress-bar","mode","determinate",3,"value",4,"ngIf"],["class","cancel-upload md-24",3,"click",4,"ngIf"],["mode","determinate",1,"progress-bar",3,"value"],[1,"cancel-upload","md-24",3,"click"]],template:function(e,t){if(1&e){const e=o.Mb();o.Jb(0,"br"),o.Lb(1,"input",0,1),o.Sb("change",(function(e){return t.onFileSelected(e)})),o.Kb(),o.Lb(3,"div",2),o.ic(4),o.Lb(5,"button",3),o.Sb("click",(function(){return o.dc(e),o.cc(2).click()})),o.Lb(6,"span",4),o.ic(7,"attach_file"),o.Kb(),o.Kb(),o.Kb(),o.Lb(8,"div",5),o.hc(9,le,1,1,"mat-progress-bar",6),o.hc(10,ue,2,0,"mat-icon",7),o.Kb()}2&e&&(o.xb(1),o.Xb("accept",t.requiredFileType),o.xb(3),o.kc(" ",t.fileName||"No poster uploaded yet."," "),o.xb(5),o.Xb("ngIf",t.uploadProgress),o.xb(1),o.Xb("ngIf",t.uploadProgress))},directives:[n.j],styles:[".file-input[_ngcontent-%COMP%]{display:none}.file-upload[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]{display:flex;align-items:center}.upload-btn[_ngcontent-%COMP%]{border:none;margin-left:1rem;background-color:#fff}.progress[_ngcontent-%COMP%]{margin-top:1rem}.material-icons[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px;background-color:#6495ed;line-height:40px}.material-icons.md-18[_ngcontent-%COMP%]{font-size:18px}.material-icons.md-24[_ngcontent-%COMP%]{font-size:24px}.material-icons.md-36[_ngcontent-%COMP%]{font-size:36px}.material-icons.md-48[_ngcontent-%COMP%]{font-size:48px}.material-icons.md-dark[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}.material-icons.md-dark.md-inactive[_ngcontent-%COMP%]{color:rgba(0,0,0,.26)}.material-icons.md-light[_ngcontent-%COMP%]{color:#fff}.material-icons.md-light.md-inactive[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.3)}"]}),e})();function fe(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Name is required"),o.Kb())}function he(e,t){if(1&e&&(o.Lb(0,"div",13),o.hc(1,fe,2,0,"div",14),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.title.errors.required)}}function pe(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Genre is required"),o.Kb())}function ge(e,t){if(1&e&&(o.Lb(0,"div",13),o.hc(1,pe,2,0,"div",14),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.genre.errors.required)}}function ve(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Photo Path is required"),o.Kb())}function Le(e,t){if(1&e&&(o.Lb(0,"div",13),o.hc(1,ve,2,0,"div",14),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.photoPath.errors.required)}}function Ke(e,t){1&e&&o.Jb(0,"span",15)}const xe=function(e){return{"is-invalid":e}};let Ie=(()=>{class e{constructor(e,t,i,r,n){this.formBuilder=e,this.route=t,this.router=i,this.accountService=r,this.alertService=n,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({title:["",r.m.required],genre:["",r.m.required],photoPath:["assets/images/",r.m.required]}),this.id=+this.route.snapshot.paramMap.get("id"),this.id?(this.panelTitle="Edit Poster",this.accountService.getPosterById(this.id).pipe(Object(s.a)()).subscribe(e=>{this.form.patchValue(e),this.poster=e,this.posterPreview=e.photoPath})):(this.panelTitle="Add New Poster",this.poster={id:null,title:null,genre:null,photoPath:null})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.mapFormValuesToPoster(),this.id?this.accountService.updatePoster(this.poster).subscribe(()=>{this.router.navigate(["admin/accounts/movie-posters"])},e=>{this.alertService.error(e)}):this.accountService.addPoster(this.poster).subscribe(()=>{this.router.navigate(["admin/accounts/movie-posters"])},e=>{this.alertService.error(e)}))}mapFormValuesToPoster(){this.poster.title=this.form.value.title,this.poster.genre=this.form.value.genre,this.poster.photoPath=this.form.value.photoPath}onPhotoPathChange(e){this.posterPreview=this.form.value.photoPath}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(r.c),o.Ib(b.a),o.Ib(b.c),o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-movie-poster-edit"]],decls:31,vars:17,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-6"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","genre",1,"form-control",3,"ngClass"],["type","text","formControlName","photoPath",1,"form-control",3,"ngClass","keyup"],["requiredFileType","image/png"],["alt","Poster Preview",1,"posterPreview",3,"src"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts/movie-posters",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(o.Lb(0,"form",0),o.Sb("ngSubmit",(function(){return t.onSubmit()})),o.Lb(1,"h1"),o.ic(2),o.Kb(),o.Jb(3,"br"),o.Lb(4,"div",1),o.Lb(5,"div",2),o.Lb(6,"label"),o.ic(7,"Title"),o.Kb(),o.Jb(8,"input",3),o.hc(9,he,2,1,"div",4),o.Kb(),o.Lb(10,"div",2),o.Lb(11,"label"),o.ic(12,"Genre"),o.Kb(),o.Jb(13,"input",5),o.hc(14,ge,2,1,"div",4),o.Kb(),o.Lb(15,"div",2),o.Lb(16,"label"),o.ic(17,"Photo Path"),o.Kb(),o.Lb(18,"input",6),o.Sb("keyup",(function(e){return t.onPhotoPathChange(e)})),o.Kb(),o.hc(19,Le,2,1,"div",4),o.Jb(20,"app-file-upload",7),o.Jb(21,"br"),o.Lb(22,"h4"),o.ic(23,"Poster Preview:"),o.Kb(),o.Jb(24,"img",8),o.Kb(),o.Kb(),o.Lb(25,"div",9),o.Lb(26,"button",10),o.hc(27,Ke,1,0,"span",11),o.ic(28,"Save "),o.Kb(),o.Lb(29,"a",12),o.ic(30,"Cancel"),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.Xb("formGroup",t.form),o.xb(2),o.jc(t.panelTitle),o.xb(6),o.Xb("ngClass",o.ac(11,xe,t.submitted&&t.f.title.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.title.errors),o.xb(4),o.Xb("ngClass",o.ac(13,xe,t.submitted&&t.f.genre.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.genre.errors),o.xb(4),o.Xb("ngClass",o.ac(15,xe,t.submitted&&t.f.photoPath.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.photoPath.errors),o.xb(5),o.Xb("src",t.posterPreview,o.fc),o.xb(2),o.Xb("disabled",t.loading),o.xb(1),o.Xb("ngIf",t.loading))},directives:[r.o,r.g,r.e,r.b,r.f,r.d,n.h,n.j,me,b.f],styles:[".posterPreview[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{width:50%;margin:1rem 0;font-weight:900}"]}),e})();function Se(e,t){1&e&&o.Jb(0,"span",13)}function we(e,t){1&e&&(o.Lb(0,"span"),o.ic(1,"Delete"),o.Kb())}function Ce(e,t){if(1&e){const e=o.Mb();o.Lb(0,"tr"),o.Lb(1,"td"),o.ic(2),o.Kb(),o.Lb(3,"td"),o.ic(4),o.Kb(),o.Lb(5,"td"),o.ic(6),o.Kb(),o.Lb(7,"td"),o.ic(8),o.Kb(),o.Lb(9,"td"),o.ic(10),o.Kb(),o.Lb(11,"td"),o.ic(12),o.Kb(),o.Lb(13,"td",9),o.Lb(14,"a",10),o.ic(15,"Edit"),o.Kb(),o.Lb(16,"button",11),o.Sb("click",(function(){o.dc(e);const i=t.$implicit;return o.Wb().deleteContact(i.id)})),o.hc(17,Se,1,0,"span",12),o.hc(18,we,2,0,"span",8),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=t.$implicit;o.xb(2),o.jc(e.date),o.xb(2),o.jc(e.day),o.xb(2),o.jc(e.month),o.xb(2),o.jc(e.title),o.xb(2),o.jc(e.time),o.xb(2),o.jc(e.cinema),o.xb(2),o.Yb("routerLink","edit/",e.id,""),o.xb(2),o.Xb("disabled",e.isDeleting),o.xb(1),o.Xb("ngIf",e.isDeleting),o.xb(1),o.Xb("ngIf",!e.isDeleting)}}function Xe(e,t){1&e&&(o.Lb(0,"tr"),o.Lb(1,"td",14),o.Jb(2,"span",15),o.Kb(),o.Kb())}let ye=(()=>{class e{constructor(e,t,i){this.accountService=e,this.route=t,this.alertService=i,this.isDeleting=!1}ngOnInit(){this.accountService.getShowtime().pipe(Object(s.a)()).subscribe(e=>{this.showtime=e},e=>{this.alertService.error(e)})}deleteContact(e){confirm("Are you sure?")&&(this.showtime.find(t=>t.id===e).isDeleting=!0,this.accountService.deleteShowtimeById(e).pipe(Object(s.a)()).subscribe(()=>{this.showtime=this.showtime.filter(t=>t.id!==e),this.alertService.success("Showtime deleted successful")},e=>{this.alertService.error(e)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(c.a),o.Ib(b.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-now-playing-admin"]],decls:26,vars:2,consts:[[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","7%"],[2,"width","14%"],[2,"width","10%"],[2,"width","25%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","bt-sm","btn-danger","btn-delete-account",3,"disabled","click"],["class","spinner-border spinner-border -sm",4,"ngIf"],[1,"spinner-border","spinner-border","-sm"],["colspan","7",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,t){1&e&&(o.Lb(0,"div",0),o.Lb(1,"h1"),o.ic(2,"Now Playing"),o.Kb(),o.Lb(3,"a",1),o.ic(4,"Add Showtime"),o.Kb(),o.Jb(5,"br"),o.Jb(6,"br"),o.Lb(7,"table",2),o.Lb(8,"thead"),o.Lb(9,"tr"),o.Lb(10,"th",3),o.ic(11,"Date"),o.Kb(),o.Lb(12,"th",4),o.ic(13,"Day"),o.Kb(),o.Lb(14,"th",5),o.ic(15,"Month"),o.Kb(),o.Lb(16,"th",6),o.ic(17,"Title"),o.Kb(),o.Lb(18,"th",3),o.ic(19,"Time"),o.Kb(),o.Lb(20,"th",5),o.ic(21,"Cinema"),o.Kb(),o.Jb(22,"th",5),o.Kb(),o.Kb(),o.Lb(23,"tbody"),o.hc(24,Ce,19,10,"tr",7),o.hc(25,Xe,3,0,"tr",8),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.xb(24),o.Xb("ngForOf",t.showtime),o.xb(1),o.Xb("ngIf",!t.showtime))},directives:[b.f,n.i,n.j],styles:[""]}),e})();function Pe(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Date is required"),o.Kb())}function Ne(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,Pe,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.date.errors.required)}}function qe(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Day is required"),o.Kb())}function ke(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,qe,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.day.errors.required)}}function Je(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Month is required"),o.Kb())}function Oe(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,Je,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.month.errors.required)}}function Me(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Title is required"),o.Kb())}function je(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,Me,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.title.errors.required)}}function Ae(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Time is required"),o.Kb())}function Fe(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,Ae,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.time.errors.required)}}function De(e,t){1&e&&(o.Lb(0,"div"),o.ic(1,"Cinema is required"),o.Kb())}function Te(e,t){if(1&e&&(o.Lb(0,"div",14),o.hc(1,De,2,0,"div",15),o.Kb()),2&e){const e=o.Wb();o.xb(1),o.Xb("ngIf",e.f.cinema.errors.required)}}function We(e,t){1&e&&o.Jb(0,"span",16)}const _e=function(e){return{"is-invalid":e}};let Ee=(()=>{class e{constructor(e,t,i,r,n){this.formBuilder=e,this.route=t,this.router=i,this.accountService=r,this.alertService=n,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({date:["",r.m.required],day:["",r.m.required],month:["",r.m.required],title:["",r.m.required],time:["",r.m.required],cinema:["",r.m.required]}),this.id=+this.route.snapshot.paramMap.get("id"),this.id?(this.panelTitle="Edit Movie Showtime",this.accountService.getMovieShowTimeById(this.id).pipe(Object(s.a)()).subscribe(e=>{this.showtime=e,this.form.patchValue(e)},e=>{this.alertService.error(e)})):(this.panelTitle="Add Movie Showtime",this.showtime={id:null,date:null,day:null,month:null,title:null,time:null,cinema:null})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.mapFormValuesToShowtime(),this.id?this.accountService.updateMovieShowtime(this.showtime).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Showtime updated successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}):this.accountService.addMovieShowtime(this.showtime).pipe(Object(s.a)()).subscribe({next:()=>{this.alertService.success("Showtime added successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{this.alertService.error(e),this.loading=!1}}))}mapFormValuesToShowtime(){this.showtime.date=this.form.value.date,this.showtime.day=this.form.value.day,this.showtime.month=this.form.value.month,this.showtime.title=this.form.value.title,this.showtime.time=this.form.value.time,this.showtime.cinema=this.form.value.cinema}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(r.c),o.Ib(b.a),o.Ib(b.c),o.Ib(c.a),o.Ib(c.b))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-now-playing-edit"]],decls:42,vars:28,consts:[[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-6"],["type","text","formControlName","date",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","day",1,"form-control",3,"ngClass"],["type","text","formControlName","month",1,"form-control",3,"ngClass"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],["type","text","formControlName","time",1,"form-control",3,"ngClass"],["type","text","formControlName","cinema",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/admin/accounts/now-playing-admin",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(o.Lb(0,"form",0),o.Sb("ngSubmit",(function(){return t.onSubmit()})),o.Lb(1,"h1"),o.ic(2),o.Kb(),o.Jb(3,"br"),o.Lb(4,"div",1),o.Lb(5,"div",2),o.Lb(6,"label"),o.ic(7,"Date"),o.Kb(),o.Jb(8,"input",3),o.hc(9,Ne,2,1,"div",4),o.Kb(),o.Lb(10,"div",2),o.Lb(11,"label"),o.ic(12,"Day"),o.Kb(),o.Jb(13,"input",5),o.hc(14,ke,2,1,"div",4),o.Kb(),o.Lb(15,"div",2),o.Lb(16,"label"),o.ic(17,"Month"),o.Kb(),o.Jb(18,"input",6),o.hc(19,Oe,2,1,"div",4),o.Kb(),o.Lb(20,"div",2),o.Lb(21,"label"),o.ic(22,"Title"),o.Kb(),o.Jb(23,"input",7),o.hc(24,je,2,1,"div",4),o.Kb(),o.Lb(25,"div",2),o.Lb(26,"label"),o.ic(27,"Time"),o.Kb(),o.Jb(28,"input",8),o.hc(29,Fe,2,1,"div",4),o.Kb(),o.Lb(30,"div",2),o.Lb(31,"label"),o.ic(32,"Cinema"),o.Kb(),o.Jb(33,"input",9),o.hc(34,Te,2,1,"div",4),o.Kb(),o.Kb(),o.Jb(35,"br"),o.Lb(36,"div",10),o.Lb(37,"button",11),o.hc(38,We,1,0,"span",12),o.ic(39,"Save "),o.Kb(),o.Lb(40,"a",13),o.ic(41,"Cancel"),o.Kb(),o.Kb(),o.Kb()),2&e&&(o.Xb("formGroup",t.form),o.xb(2),o.jc(t.panelTitle),o.xb(6),o.Xb("ngClass",o.ac(16,_e,t.submitted&&t.f.date.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.date.errors),o.xb(4),o.Xb("ngClass",o.ac(18,_e,t.submitted&&t.f.day.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.day.errors),o.xb(4),o.Xb("ngClass",o.ac(20,_e,t.submitted&&t.f.month.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.month.errors),o.xb(4),o.Xb("ngClass",o.ac(22,_e,t.submitted&&t.f.title.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.title.errors),o.xb(4),o.Xb("ngClass",o.ac(24,_e,t.submitted&&t.f.time.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.time.errors),o.xb(4),o.Xb("ngClass",o.ac(26,_e,t.submitted&&t.f.cinema.errors)),o.xb(1),o.Xb("ngIf",t.submitted&&t.f.cinema.errors),o.xb(3),o.Xb("disabled",t.loading),o.xb(1),o.Xb("ngIf",t.loading))},directives:[r.o,r.g,r.e,r.b,r.f,r.d,n.h,n.j,b.f],styles:[".form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}"]}),e})();const Be=[{path:"",component:m},{path:"add",component:F},{path:"edit/:id",component:F},{path:"subscribers",component:E},{path:"contacts",component:$},{path:"contacts/edit/:id",component:re},{path:"movie-posters",component:ce},{path:"movie-posters/edit/:id",component:Ie},{path:"movie-posters/add",component:Ie},{path:"now-playing-admin",component:ye},{path:"now-playing-admin/edit/:id",component:Ee},{path:"now-playing-admin/add",component:Ee}];let Ge=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[b.g.forChild(Be)],b.g]}),e})(),Re=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[n.b,r.j,Ge]]}),e})()}}]);